/*! bespoke-spotlight v0.0.1-alpha-1 Â© 2013 Ben Birch, Licensed MIT */
(function(e){function r(e){var t="",n="\\^$*+?.()=|{,}[]-";for(var r=0;r<e.length;r++)t+=(n.indexOf(e.charAt(r))===-1?"":"\\")+e.charAt(r);return t}var t=81,n=[function(e){return e.querySelectorAll("header, h1, h2, h3, h4, h5, h6")},function(e){return[e]}],i=function(e){function u(){s=i,c.style.display="block",h.value="",h.focus(),o=!0}function a(){c.style.display="none",h.className="",o=!1}var i=0,s=0;e.on("activate",function(e){i=e.index});var o=!1,f=n.map(function(t){return e.slides.map(function(e){return Array.prototype.reduce.call(t(e),function(e,t){return e+" "+t.textContent},"").trim().replace(/\s+/g," ")})}),l=document.createElement("DIV");l.innerHTML='<div id="bespoke-spotlight" style="display: none"><input type="text" id="bespoke-spotlight-q"></div>',document.body.appendChild(l.firstChild);var c=document.getElementById("bespoke-spotlight"),h=document.getElementById("bespoke-spotlight-q");h.addEventListener("blur",a),h.addEventListener("keyup",function(){var t=h.value;if(t.length===0)return;var n=new RegExp(r(t),"i");for(var i=0;i<f.length;i++){var o=f[i];for(var u=0;u<o.length;u++)if(n.test(o[u])){e.slide(u),h.className="";return}}h.className="no-match",e.slide(s)}),window.addEventListener("keydown",function(e){!o&&e.which===t&&(u(),e.preventDefault()),o&&(e.which===27||e.which===13)&&a()})};e.plugins.spotlight=i})(bespoke);